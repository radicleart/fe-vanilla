<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <!--[if IE]><link rel="icon" href="/favicon.ico"><![endif]-->    
    <!-- link to the SqPaymentForm library -->
    <script type="text/javascript" src="https://js.squareupsandbox.com/v2/paymentform"></script>
    <!-- link to the local custom styles for SqPaymentForm -->
    <title>risidio-pay</title>
  </head>
  <body class="bg-dark">
    <noscript>You need javascript.</noscript>
    <script>
      const payment = {
        amountFiat: 5,
        currency: 'GBP',
        method: 'bitcoin',
        paymentCode: 'po-12323423324'
      }
      window.risidioPaymentConfig = JSON.stringify({ paymentOption: 'lightning', paymentOptions: [ { allowBitcoin: true }, {allowLightning: true}, {allowStacks: true}, {allowLSAT: false}, {allowEthereum: true} ], orderId: 'XqLKQxEAACQAYvsu', payment: payment})
    </script>
    <div id="rpay-entry" msg="aint no sunshine!"></div>
    <div id="opcode"></div>
    <div id="trigger"><button onclick="loadApp(this)">load payment</button></div>
    <!--
    <script type="text/javascript" src="https://trpay.risidio.com/js/chunk-vendors.js"></script>
    <script type="text/javascript" src="https://trpay.risidio.com/js/app.js"></script>
    -->
    <script type="text/javascript">
      window.addEventListener("load", function(event) {
      // here is the Vue code
        // window.eventBus.$on('paymentEvent', function(data) { 
          // document.getElementById('opcode').innerHTML = data.opcode;
        // })
      });
      function hideApp( ) {
        document.getElementById("rpay-container").style.display = "none";
      }
      function loadApp( src ) {
        var s1 = document.createElement( 'script' );
        s1.setAttribute( 'src', "chunk-vendors.js" );
        document.body.appendChild( s1 );
        var s2 = document.createElement( 'script' );
        s2.setAttribute( 'src', "app.js" );
        document.body.appendChild( s2 );
        setTimeout(function(){
          window.eventBus.$on('paymentEvent', function(data) { 
            document.getElementById('opcode').innerHTML = data.opcode;
          })
        }, 3000);
      }
    </script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>
</html>
